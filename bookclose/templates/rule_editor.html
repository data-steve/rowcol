<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
</head>
<body>
    <div id="root" class="container mx-auto p-4"></div>
    <script>
        const RuleEditor = () => {
            const [rules, setRules] = React.useState([
                { rule_id: 1, pattern: "Starbucks", account: "6000-Expenses" },
                { rule_id: 2, pattern: "Amazon", account: "6000-Expenses" }
            ]);
            const [newPattern, setNewPattern] = React.useState("");

            const handleSubmit = () => {
                if (newPattern.trim()) {
                    const newRule = {
                        rule_id: rules.length + 1,
                        pattern: newPattern,
                        account: "6000-Expenses"
                    };
                    setRules([...rules, newRule]);
                    setNewPattern("");
                }
            };

            const renderRules = () => {
                return rules.map(rule => 
                    '<div class="mb-2 p-2 bg-white rounded">' +
                        '<p><strong>Pattern:</strong> ' + rule.pattern + '</p>' +
                        '<p><strong>Account:</strong> ' + rule.account + '</p>' +
                    '</div>'
                ).join('');
            };

            const renderComponent = () => {
                const root = document.getElementById('root');
                root.innerHTML = `
                    <div class="flex space-x-4">
                        <div class="w-1/3 p-4 bg-gray-100 rounded">
                            <h3 class="font-bold mb-2">Rules:</h3>
                            <div id="rules-list">
                                ${renderRules()}
                            </div>
                        </div>
                        <div class="w-1/3 p-4 bg-gray-100 rounded">
                            <h3 class="font-bold mb-2">Add New Rule:</h3>
                            <input 
                                id="new-pattern-input"
                                class="border p-2 w-full mb-2" 
                                value="${newPattern}" 
                                placeholder="Enter pattern" 
                            />
                            <button 
                                id="add-rule-btn"
                                class="bg-blue-500 text-white p-2 rounded w-full"
                            >
                                Add Rule
                            </button>
                        </div>
                        <div class="w-1/3 p-4 bg-gray-100 rounded">
                            <h3 class="font-bold mb-2">Preview:</h3>
                            <p>New Pattern: ${newPattern}</p>
                            <p>Total Rules: ${rules.length}</p>
                        </div>
                    </div>
                `;

                // Add event listeners
                document.getElementById('new-pattern-input').addEventListener('input', (e) => {
                    setNewPattern(e.target.value);
                });
                
                document.getElementById('add-rule-btn').addEventListener('click', handleSubmit);
            };

            // Initial render
            renderComponent();

            // Re-render when state changes
            React.useEffect(() => {
                renderComponent();
            }, [rules, newPattern]);

            return null; // This component doesn't return JSX
        };

        ReactDOM.render(React.createElement(RuleEditor), document.getElementById("root"));
    </script>
</body>
</html>
