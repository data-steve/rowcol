---
task_id: {{task_id}}
objective: "{{objective}}"
status: "pending" # pending | discovering | gap_analysis | healing | implementing | verifying | documenting | done
log:
  - entry: "Task created."
    timestamp: "{{timestamp}}" # ISO 8601 format

# --- INPUTS ---
# Raw user notes, complaints, ideas, questions. Use @document to add to this section.
inputs: |
  - 

# --- DISCOVERY ---
# What actually exists in the codebase. Generated by discovery commands.
discovery: |
  - [Discovery Pending - Run discovery commands to understand current reality]

# --- GAP ANALYSIS ---
# Comparison between build plan assumptions and discovered reality.
gap_analysis: |
  - [Gap Analysis Pending - Compare assumptions vs reality]

# --- GAP HEALING PLAN ---
# How to fix discovered gaps as part of this task.
gap_healing_plan: |
  - [Gap Healing Plan Pending - Plan how to heal discovered gaps]

# --- PROPOSED SOLUTION ---
# High-level plan of attack. Generated by @solution.
solution: |
  - [Solution Pending]

# --- PLAN ---
# The final, executable plan. Generated by @plan and used by @build.
# This block is read by auto.py
plan:
  files_to_touch:
    - path/to/file.py
  edits:
    - "file:section:intent"
  tests:
    - "pytest -q -k '...'"
  verification:
    - "command to run"
  rollback:
    - "git restore -SW ..."
  risk_notes:
    - "Potential side effects or concerns"

# --- IMPLEMENTATION NOTES ---
# Technical details, gotchas, and implementation guidance
implementation_notes: |
  - [Implementation details will be added during @plan phase]

# --- VERIFICATION ---
# How to verify the task is complete
verification: |
  - [Verification steps will be added during @plan phase]

# --- DOCUMENTATION UPDATES ---
# How this task updates the build plan and related documentation
documentation_updates: |
  - [Documentation updates will be added during @document phase]

# --- DISCOVERY COMMANDS ---
# Commands to run to understand current reality
discovery_commands: |
  - "grep -r 'pattern_name' . --include='*.py'"
  - "find . -name '*.py' -exec grep -l 'pattern_name' {} \;"
  - "grep -r 'import.*pattern_name' . --include='*.py'"
  - "grep -r 'advisor_id' . --include='*.py'"
  - "grep -r 'business_id' . --include='*.py'"
  - "grep -r 'firm_id' . --include='*.py'"
  - "uvicorn main:app --reload"
  - "pytest -k 'test_pattern_name'"

# --- GAP HEALING COMMANDS ---
# Commands to run to heal discovered gaps
gap_healing_commands: |
  - "command to heal gap 1"
  - "command to heal gap 2"
  - "command to heal gap 3"
